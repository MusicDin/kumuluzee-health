language: java
dist: trusty

jdk:
- openjdk8

env:
  global:
  - secure: FA/EdtDtoy7h6wIi798tOFzPNtJBRIZQfelvWqWUJ/JFRmGrCVYSUB0RUa1PMP0S4v+uokkmG8cnHq0JXSSte8i0n2hA4ZthOUU/fnXbPW4ckPVBGzpeGmN/VmbUssMhxgF8gW3JtCr2guLn9V05RG+okAakFB/4BFiqR8DwJa5LmI+mR5vg7S+6P4LGg7UUQkg9GGVt2v5Uk4ZneFUewjn484C341I2KxW4Nud6+UulY8Ylk7oX7u9M0w/kNNSFsOUyhJj35xgZOXU1/WXVq3I4Nfafvf3HySNWtvY7CH2POW9e2HtjbEFkr22DRM4KCtKw4LlTFYTI1vmnxcc/dg0+2ouOpiOt9EK/+C/p7OrUJmpiOhsIplcDC3hML1g+Q1oq3I+/19gcLuWkfA76AVyX4Xk3qnMMnSs1+GCUhwUSwAgdJdwIACYepG2Oohi9S5kh6D54poy4CjLBvkKfjhVaQindkeeU1T3TX2qJQPq71NykrY/6BWuc8Vr3Ivb4ZPmAOznbifJYr1B1uEXO297AYqGT5cs3CHIHJDnq2biPJ9jh6SG9jXAAuTBtt8QgC5yQy3Sk/tyIazaDMBBdMZSRYQ+R15KODfgwx6PGUPA0P4EymnxfR6tqNsDPDmV1zZ3WrkVZKUE+qWBsRC5+leHiVaogPUocrG5gLgWBhAI=
  - secure: Pj93G4FSkeL1f23z5NqZcpi1zZkTBbIV1LsOiZ8GAvSQxtD89/r5JkXfrTEZH9o5JDxnDATzzYV2VCy84WUgkuWiaCZ0o+I3IJIexMNvO+bOR5erzR3punlh67WJtZyTIikTbin4PJGhmPOpnAeOGeEdkouKzotK/uMcy8VngO7yq9kylOT+JjEQplxgCty6u4fJPPgtV4zk5jMcF5N+p2u/rG4d9KIuuLWWm83PPnwoPxWxUDZaZAuKGhpZoGHLy5SDVJEgjlWW1xl3/6iOtF1p05r24qZyBCOcWEG+X0LYAaWCMC8etExThL8OfTtpytOVGxz6nfLQUMDlYn9KcmflNAixA4uwpuphKRJpqDfKk2t3u8foXuk7y3VhYFsLoxQVMBQNdDYP//4nfDk/HvubPZnKYdloSpiQROTTcjJbRSgqO1wteb/kcTWqiV9o93yY1SDJSsdmHdT16USgssVjDdTUxkIf2lVuAVDXKzqObr3+W/B9N9nhdmrPkYDxORd2n8hyRgqB8KEc/VItBhhEzH5URFxFxFIwwZOxx9uR3e5QQjmNUjP/jT6fB8EHplTgG6obPKbBjDXAJgGqKnz8F9wW6SKOI8Ik3vOJdtrY48gQcu7pFZHc7716RjjQMxDLvkcWAYCKjtui543BlNkGpOlIP1/teAW674KcIn0=
  - secure: BtaLZpOfUF7k1hme9JXU9HEtFrwlzqZTzbtjrgScUxdq87TEl1Ayq9ke6r8hDuRkJDsu+M7CGHAkKpFtleVHWJLhfGyg7fmIIWxUvpJ7Nfur23R1WWnXqNnJgFSVMWTe+lYAK9w9KM4/XQ5QVDcOxAIKdwVNOT6VreesVq4D2ePE+qp2Z4gjXSQFRdZQizA8QyXW9LzsP6pRVT8hbR8ztKPDFKUY1Y4ebGzrP5BfZvgcYDLXLDuF/Loj2rLZDkfBY0Fqxdovd5qk4U/VPWcGvV6oBCRnXs5zoGKzHqrLnjAzqR2E+lpX5uVqcvtrA3peh7kR5LizmU4M5kfEONritNBDIBQV+OLOxrtycaVy+2nQChPjo5mCSDmIWjgpFd5xESRQ0EygchYB6lwgws5LkjbWl2uDwCdED9u6w+6Td4JEnRo1fjTteataSlPH9qHMC7uA6S+ImYRt+Ud5K0rm+maKKVVDRHwbbFzi4En4kMBvEeb0SZYdPOvyGY7L2cCOVeMFZuQ7eMDp970BdMWii/ZM0JmNcgZxsBZEgEHzlgtg5ttoaNYXrECbQNmdWsZgmIEBTaby91YJh6UnHDFxi4J+ikCBhElj2/4mEuVRIqXxeXv2SSm7bar+voOnxyas4A+7SqqKc2J50QUbWUPGlmp4FEYfAvhDf8OjYnA9uQQ=

cache:
  directories:
  - "$HOME/.m2"

install: mvn clean install -DskipTests=true -V -U
script: mvn test

after_success:
# Deploy to OSSHR
- if [[ $TRAVIS_PULL_REQUEST == "false" && ($TRAVIS_BRANCH == "master" || $TRAVIS_TAG) ]]; then
    openssl aes-256-cbc -K $encrypted_b71e443de2dd_key -iv $encrypted_b71e443de2dd_iv -in gpg.tar.gz.enc -out gpg.tar.gz -d;
    tar xvf gpg.tar.gz;
    mvn source:jar javadoc:jar deploy -Pdeploy -DskipTests=true --settings ./settings.xml;
  fi